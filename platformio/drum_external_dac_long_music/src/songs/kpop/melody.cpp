#include "melody.h"

// K-POP style 16 melody pattern library
const int kpop_melo_patterns[NUM_PATTERNS][NUM_MELO_TRACKS][PATTERN_LENGTH] = {
  // Pattern 0: Intro - minimal & clean
  {
    { 48, 0, 0, 0, 48, 0, 0, 0, 0, 0, 48, 0, 48, 0, 0, 0 }, // Bass1
    { 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0 },     // Bass2
    { 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0 },     // Chord
    { 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0 }      // Lead
  },
  // Pattern 1: Intro - add harmony
  {
    { 48, 0, 0, 0, 48, 0, 0, 50, 48, 0, 48, 0, 48, 0, 50, 52 }, // Bass1
    { 0, 0, 0, 0, 0, 0, 0, 0, 0, 60, 0, 0, 0, 0, 0, 0 },       // Bass2
    { 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0 },       // Chord
    { 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 72 }       // Lead
  },
  // Pattern 2: Pre-verse - characteristic K-POP pattern
  {
    { 48, 0, 50, 0, 48, 0, 0, 52, 48, 0, 50, 0, 48, 0, 0, 0 }, // Bass1
    { 0, 0, 0, 0, 60, 0, 0, 0, 0, 0, 0, 0, 62, 0, 60, 0 },    // Bass2
    { 0, 72, 0, 72, 0, 0, 75, 0, 0, 72, 0, 72, 0, 0, 0, 77 }, // Chord
    { 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0 }        // Lead
  },
  // Pattern 3: Verse 1 - clean & tight
  {
    { 48, 0, 0, 50, 48, 0, 0, 0, 48, 0, 0, 50, 48, 0, 52, 0 }, // Bass1
    { 0, 0, 0, 0, 60, 0, 0, 0, 0, 0, 0, 0, 60, 0, 0, 0 },     // Bass2
    { 72, 0, 0, 0, 75, 0, 0, 0, 72, 0, 0, 0, 77, 0, 0, 0 },   // Chord
    { 0, 0, 84, 0, 0, 0, 0, 0, 0, 0, 84, 0, 0, 0, 0, 87 }     // Lead
  },
  // Pattern 4: Verse 2 - add variation
  {
    { 48, 0, 50, 52, 48, 0, 0, 50, 48, 0, 50, 0, 48, 0, 0, 52 }, // Bass1
    { 0, 0, 0, 0, 60, 0, 62, 0, 0, 0, 0, 0, 60, 0, 62, 0 },     // Bass2
    { 72, 0, 0, 75, 77, 0, 0, 72, 75, 0, 0, 77, 79, 0, 0, 75 }, // Chord
    { 0, 84, 0, 0, 0, 87, 0, 0, 0, 84, 0, 0, 0, 89, 0, 0 }      // Lead
  },
  // Pattern 5: Pre-chorus - build tension
  {
    { 48, 0, 48, 52, 48, 0, 50, 0, 48, 0, 48, 52, 48, 0, 50, 55 }, // Bass1
    { 60, 0, 0, 0, 62, 0, 0, 0, 60, 0, 0, 0, 64, 0, 0, 0 },       // Bass2
    { 72, 75, 77, 75, 79, 77, 75, 79, 72, 75, 77, 75, 81, 77, 75, 84 }, // Chord
    { 0, 0, 0, 87, 0, 0, 0, 89, 0, 0, 0, 91, 0, 0, 0, 96 }        // Lead
  },
  // Pattern 6: Drop preparation - suspense
  {
    { 48, 48, 0, 0, 48, 48, 0, 0, 48, 48, 0, 0, 48, 48, 50, 52 }, // Bass1
    { 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0 },          // Bass2
    { 0, 0, 72, 75, 0, 0, 77, 79, 0, 0, 81, 84, 0, 0, 0, 0 },    // Chord
    { 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 96, 96, 96, 0 }        // Lead
  },
  // Pattern 7: Verse 3 - development
  {
    { 48, 0, 0, 50, 48, 0, 52, 0, 48, 0, 0, 50, 48, 0, 0, 0 },   // Bass1
    { 0, 0, 60, 0, 0, 62, 0, 60, 0, 0, 62, 0, 0, 64, 0, 62 },    // Bass2
    { 72, 0, 0, 75, 77, 0, 0, 72, 75, 0, 0, 77, 79, 0, 0, 75 },  // Chord
    { 84, 0, 87, 0, 84, 0, 89, 0, 84, 0, 87, 0, 91, 0, 89, 0 }   // Lead
  },
  // Pattern 8: Chorus 1 - powerful (melody focus)
  {
    { 48, 0, 48, 0, 48, 0, 48, 0, 48, 0, 48, 0, 48, 0, 48, 0 }, // Bass1
    { 60, 0, 62, 0, 60, 0, 64, 0, 60, 0, 62, 0, 60, 0, 67, 0 }, // Bass2
    { 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0 },        // Chord
    { 96, 0, 94, 0, 91, 0, 89, 0, 91, 0, 94, 0, 96, 0, 98, 0 }  // Lead
  },
  // Pattern 9: Chorus 2 - full arrangement
  {
    { 48, 0, 50, 52, 48, 0, 50, 0, 48, 0, 50, 52, 48, 0, 50, 0 }, // Bass1
    { 60, 0, 62, 0, 64, 0, 62, 0, 60, 0, 62, 0, 67, 0, 64, 0 },   // Bass2
    { 72, 75, 77, 79, 81, 77, 75, 79, 72, 75, 77, 79, 84, 79, 77, 81 }, // Chord
    { 96, 94, 0, 91, 89, 91, 0, 94, 96, 94, 0, 91, 98, 96, 0, 94 }      // Lead
  },
  // Pattern 10: Chorus 3 - climax
  {
    { 48, 50, 0, 52, 48, 50, 0, 55, 48, 50, 0, 52, 48, 50, 0, 57 }, // Bass1
    { 60, 0, 62, 0, 64, 0, 67, 0, 69, 0, 67, 0, 71, 0, 69, 0 },     // Bass2
    { 72, 75, 77, 79, 81, 84, 77, 79, 81, 84, 87, 89, 91, 84, 87, 94 }, // Chord
    { 96, 98, 100, 98, 96, 94, 96, 98, 100, 101, 100, 98, 103, 101, 98, 96 } // Lead
  },
  // Pattern 11: Bridge 1 - melody emphasis
  {
    { 48, 0, 0, 0, 0, 0, 0, 0, 48, 0, 0, 0, 0, 0, 0, 0 },        // Bass1
    { 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0 },          // Bass2
    { 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0 },          // Chord
    { 84, 87, 89, 91, 89, 87, 84, 82, 84, 87, 89, 91, 94, 91, 89, 87 } // Lead
  },
  // Pattern 12: Bridge 2 - build up
  {
    { 48, 0, 48, 0, 48, 0, 48, 0, 48, 50, 52, 55, 57, 59, 60, 62 }, // Bass1
    { 0, 0, 0, 0, 60, 0, 0, 0, 0, 0, 0, 0, 64, 67, 69, 71 },       // Bass2
    { 0, 0, 72, 0, 75, 0, 77, 0, 79, 81, 84, 87, 89, 91, 94, 96 }, // Chord
    { 84, 0, 87, 0, 89, 0, 91, 0, 94, 96, 98, 100, 101, 103, 105, 107 } // Lead
  },
  // Pattern 13: Final chorus - full power
  {
    { 48, 50, 52, 48, 50, 52, 55, 48, 50, 52, 55, 48, 50, 52, 55, 57 }, // Bass1
    { 60, 62, 64, 67, 69, 67, 64, 71, 69, 67, 64, 72, 71, 69, 67, 74 }, // Bass2
    { 72, 75, 77, 79, 81, 84, 87, 89, 91, 84, 87, 89, 94, 89, 87, 96 }, // Chord
    { 96, 98, 100, 101, 103, 101, 100, 105, 103, 101, 100, 107, 105, 103, 101, 108 } // Lead
  },
  // Pattern 14: Outro 1 - fade out start
  {
    { 48, 0, 0, 0, 48, 0, 0, 0, 48, 0, 0, 0, 0, 0, 0, 0 }, // Bass1
    { 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0 },   // Bass2
    { 72, 0, 0, 0, 75, 0, 0, 0, 72, 0, 0, 0, 0, 0, 0, 0 }, // Chord
    { 96, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0 }    // Lead
  },
  // Pattern 15: Outro 2 - complete fade out
  {
    { 48, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0 }, // Bass1
    { 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0 },  // Bass2
    { 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0 },  // Chord
    { 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0 }   // Lead
  }
};

// K-POP style melody trigger patterns
const boolean kpop_melo_trig_patterns[NUM_PATTERNS][NUM_MELO_TRACKS][PATTERN_LENGTH] = {
  // Pattern 0: Intro - minimal
  {
    { 1, 0, 0, 0, 1, 0, 0, 0, 0, 0, 1, 0, 1, 0, 0, 0 }, // Bass1
    { 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0 }, // Bass2
    { 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0 }, // Chord
    { 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0 }  // Lead
  },
  // Pattern 1: Intro - add harmony
  {
    { 1, 0, 0, 0, 1, 0, 0, 1, 1, 0, 1, 0, 1, 0, 1, 1 }, // Bass1
    { 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0 }, // Bass2
    { 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0 }, // Chord
    { 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1 }  // Lead
  },
  // Pattern 2: Pre-verse - characteristic K-POP
  {
    { 1, 0, 1, 0, 1, 0, 0, 1, 1, 0, 1, 0, 1, 0, 0, 0 }, // Bass1
    { 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 1, 0, 1, 0 }, // Bass2
    { 0, 1, 0, 1, 0, 0, 1, 0, 0, 1, 0, 1, 0, 0, 0, 1 }, // Chord
    { 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0 }  // Lead
  },
  // Pattern 3: Verse 1 - clean
  {
    { 1, 0, 0, 1, 1, 0, 0, 0, 1, 0, 0, 1, 1, 0, 1, 0 }, // Bass1
    { 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0 }, // Bass2
    { 1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 0 }, // Chord
    { 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1 }  // Lead
  },
  // Pattern 4: Verse 2 - variation
  {
    { 1, 0, 1, 1, 1, 0, 0, 1, 1, 0, 1, 0, 1, 0, 0, 1 }, // Bass1
    { 0, 0, 0, 0, 1, 0, 1, 0, 0, 0, 0, 0, 1, 0, 1, 0 }, // Bass2
    { 1, 0, 0, 1, 1, 0, 0, 1, 1, 0, 0, 1, 1, 0, 0, 1 }, // Chord
    { 0, 1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0 }  // Lead
  },
  // Pattern 5: Pre-chorus - building
  {
    { 1, 0, 1, 1, 1, 0, 1, 0, 1, 0, 1, 1, 1, 0, 1, 1 }, // Bass1
    { 1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 0 }, // Bass2
    { 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1 }, // Chord
    { 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 0, 1 }  // Lead
  },
  // Pattern 6: Drop preparation
  {
    { 1, 1, 0, 0, 1, 1, 0, 0, 1, 1, 0, 0, 1, 1, 1, 1 }, // Bass1
    { 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0 }, // Bass2
    { 0, 0, 1, 1, 0, 0, 1, 1, 0, 0, 1, 1, 0, 0, 0, 0 }, // Chord
    { 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 0 }  // Lead
  },
  // Pattern 7: Verse 3 - development
  {
    { 1, 0, 0, 1, 1, 0, 1, 0, 1, 0, 0, 1, 1, 0, 0, 0 }, // Bass1
    { 0, 0, 1, 0, 0, 1, 0, 1, 0, 0, 1, 0, 0, 1, 0, 1 }, // Bass2
    { 1, 0, 0, 1, 1, 0, 0, 1, 1, 0, 0, 1, 1, 0, 0, 1 }, // Chord
    { 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0 }  // Lead
  },
  // Pattern 8: Chorus 1 - melody emphasis
  {
    { 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0 }, // Bass1
    { 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0 }, // Bass2
    { 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0 }, // Chord
    { 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0 }  // Lead
  },
  // Pattern 9: Chorus 2 - full arrangement
  {
    { 1, 0, 1, 1, 1, 0, 1, 0, 1, 0, 1, 1, 1, 0, 1, 0 }, // Bass1
    { 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0 }, // Bass2
    { 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1 }, // Chord
    { 1, 1, 0, 1, 1, 1, 0, 1, 1, 1, 0, 1, 1, 1, 0, 1 }  // Lead
  },
  // Pattern 10: Chorus 3 - climax
  {
    { 1, 1, 0, 1, 1, 1, 0, 1, 1, 1, 0, 1, 1, 1, 0, 1 }, // Bass1
    { 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0 }, // Bass2
    { 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1 }, // Chord
    { 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1 }  // Lead
  },
  // Pattern 11: Bridge 1 - melody emphasis
  {
    { 1, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0 }, // Bass1
    { 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0 }, // Bass2
    { 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0 }, // Chord
    { 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1 }  // Lead
  },
  // Pattern 12: Bridge 2 - build up
  {
    { 1, 0, 1, 0, 1, 0, 1, 0, 1, 1, 1, 1, 1, 1, 1, 1 }, // Bass1
    { 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 1 }, // Bass2
    { 0, 0, 1, 0, 1, 0, 1, 0, 1, 1, 1, 1, 1, 1, 1, 1 }, // Chord
    { 1, 0, 1, 0, 1, 0, 1, 0, 1, 1, 1, 1, 1, 1, 1, 1 }  // Lead
  },
  // Pattern 13: Final chorus - full power
  {
    { 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1 }, // Bass1
    { 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1 }, // Bass2
    { 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1 }, // Chord
    { 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1 }  // Lead
  },
  // Pattern 14: Outro 1 - fade out
  {
    { 1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0 }, // Bass1
    { 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0 }, // Bass2
    { 1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0 }, // Chord
    { 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0 }  // Lead
  },
  // Pattern 15: Outro 2 - complete fade out
  {
    { 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0 }, // Bass1
    { 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0 }, // Bass2
    { 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0 }, // Chord
    { 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0 }  // Lead
  }
};